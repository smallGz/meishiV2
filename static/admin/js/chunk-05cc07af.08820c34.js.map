{"version":3,"sources":["webpack:///./src/views/user/Login.vue?7a95","webpack:///src/views/user/Login.vue","webpack:///./src/views/user/Login.vue?fe4d","webpack:///./src/views/user/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","action","method","on","submit","$event","preventDefault","loginSubmit","directives","name","rawName","value","loginData","expression","type","placeholder","domProps","input","target","composing","$set","_v","_s","message","staticRenderFns","href","Loginvue_type_script_lang_js_","data","username","password","mounted","$store","state","user","$router","push","methods","_loginSubmit","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","token","wrap","_context","prev","next","sent","code","auth","setTimeout","bind","stop","apply","arguments","user_Loginvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-05cc07af.08820c34.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box_bg\"},[_c('div',{staticClass:\"box\"},[_vm._m(0),_c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"con\"},[_c('form',{attrs:{\"action\":\"/user/login\",\"method\":\"POST\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.loginSubmit($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginData.username),expression:\"loginData.username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"手机号/昵称:\",\"name\":\"username\"},domProps:{\"value\":(_vm.loginData.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginData, \"username\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginData.password),expression:\"loginData.password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"密 码:\",\"name\":\"password\"},domProps:{\"value\":(_vm.loginData.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginData, \"password\", $event.target.value)}}}),_vm._m(1),_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"确认登陆\")]),_c('p',[_vm._v(_vm._s(_vm.message))])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(\"注册\")]),_c('a',{staticClass:\"active\",attrs:{\"href\":\"javascript:;\"}},[_vm._v(\"登录\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('input',{attrs:{\"type\":\"checkbox\"}}),_vm._v(\"下次自动登陆\\n                        \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"忘记密码？\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"box_bg\">\r\n        <div class=\"box\">\r\n            <div class=\"header\">\r\n                <a href=\"javascript:;\">注册</a>\r\n                <a class=\"active\" href=\"javascript:;\">登录</a>\r\n            </div>\r\n            <div class=\"body\">\r\n                <div class=\"con\">\r\n                    <form action=\"/user/login\" method=\"POST\" @submit.prevent=\"loginSubmit\">\r\n                        <input type=\"text\" placeholder=\"手机号/昵称:\" name=\"username\" v-model=\"loginData.username\"  />\r\n                        <input type=\"password\" placeholder=\"密 码:\" name=\"password\" v-model=\"loginData.password\"/>\r\n                        <p>\r\n                            <input type=\"checkbox\" />下次自动登陆\r\n                            <a href=\"#\">忘记密码？</a>\r\n                        </p>\r\n                        <button type=\"submit\">确认登陆</button>\r\n                        <p>{{message}}</p>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport '@/assets/css/register_login.css';\r\nimport fetch from '@/libs/fetch';\r\nimport {setToken} from '@/libs/auth';\r\nimport {loginByUsername} from '@/api/user';\r\nexport default {\r\n    data(){\r\n        return {\r\n            loginData:{\r\n                username:'',\r\n                password:''\r\n            },\r\n            message:''\r\n        }\r\n    },\r\n    mounted(){\r\n        /*从cookie中获取user 存在直接跳转到index首页*/  \r\n        if(this.$store.state.user.username){\r\n            this.$router.push('/index');\r\n        }\r\n    },\r\n    methods:{\r\n        async loginSubmit(){\r\n            //接口请求\r\n            let res = await loginByUsername(this.loginData.username,this.loginData.password);\r\n            if(res){\r\n                 this.message = res.data.message;\r\n                 if(!res.data.code){\r\n                     //登录成功                     \r\n                    //存储token值\r\n                    let {token} = res.data;\r\n                    setToken(token)\r\n                    setTimeout(function(){\r\n                        this.$router.push('/')\r\n                    }.bind(this),1000)\r\n                    \r\n                }\r\n             }\r\n\r\n            \r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=ea35b19a&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports"],"sourceRoot":""}